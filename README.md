# 数学問題生成AIシステム ユーザーマニュアル

## 目次

1. [はじめに](#1-はじめに)
2. [システム概要](#2-システム概要)
3. [基本的な使い方](#3-基本的な使い方)
4. [問題生成ワークフロー](#4-問題生成ワークフロー)
5. [詳細機能ガイド](#5-詳細機能ガイド)
6. [よくある質問と回答](#6-よくある質問と回答)
7. [トラブルシューティング](#7-トラブルシューティング)
8. [ヒントと活用方法](#8-ヒントと活用方法)

## 1. はじめに

数学問題生成AIシステムへようこそ。このアプリケーションは、AIを活用して高品質な数学問題と解答を自動生成し、美しいPDF形式で出力するための教育支援ツールです。

このマニュアルでは、システムの基本的な使い方から詳細な機能まで、順を追って説明します。

### 1.1 システム要件

このシステムを利用するための最低要件：

- **OS**: Windows 10 / 11
- **メモリ**: 8GB以上（16GB推奨）
- **ストレージ**: 1GB以上の空き容量
- **インターネット接続**: OpenAI APIへのアクセスに必要
- **ブラウザ**: Google Chrome, Microsoft Edge, Firefoxの最新版

### 1.2 インストールと起動

セットアップについては、別途「[セットアップガイド](setup-guide.md)」を参照してください。

## 2. システム概要

数学問題生成AIシステムは、LangGraphを活用したマルチエージェントアーキテクチャによって高品質な数学問題の生成を実現します。

### 2.1 主な機能

- **対話型問題仕様決定**: ユーザーとの対話を通じて理想的な問題仕様を決定
- **AIによる問題生成**: 指定された難易度や分野に合った問題と解答を自動生成
- **検証と改善**: 生成された問題の数学的正確性や教育的価値を検証し改善
- **TeX形式への変換**: 生成された問題をTeX形式に変換
- **PDF出力**: 図形やグラフを含む高品質なPDFの生成
- **PDF管理**: 生成されたPDFの閲覧とダウンロード

### 2.2 ユーザーインターフェース

![ユーザーインターフェースの説明](../images/ui-overview.png)

アプリケーションは以下の2つの主要エリアで構成されています：

1. **左側パネル**: チャットインターフェース
   - ユーザーと対話して問題仕様を決定
   - 生成状況の表示
   - フィードバック機能

2. **右側パネル**: PDFプレビュー
   - 生成された問題と解答のPDFプレビュー
   - 保存ボタン

## 3. 基本的な使い方

### 3.1 アプリケーションの起動

1. スタートメニューまたはデスクトップのショートカットから「数学問題生成AIシステム」を起動
2. アプリケーションが起動し、ブラウザで自動的にメイン画面が表示されます

### 3.2 問題生成の基本ステップ

数学問題を生成する基本的な流れは以下の通りです：

1. 左側のチャットインターフェースに要望を入力（例：「高校生向けの二次関数の問題を作ってください」）
2. AIとの対話を通じて問題の詳細を指定
   - 難易度（小学生/中学生/高校生）
   - 数学分野（数と式/関数/図形/確率・統計など）
   - 出題形式（記述式/選択式/計算問題など）
   - 問題数（1〜10問）
   - 詳細条件（特定トピックや要求）
3. すべての情報が揃うと問題生成が始まります
4. 生成された問題がPDF形式で右側のパネルに表示されます
5. 「保存」ボタンをクリックしてPDFをダウンロード

### 3.3 サンプル対話

典型的な対話の例：

```
ユーザー: 「中学生向けの一次方程式の問題を作成してください」

AI: 「中学生向けの一次方程式の問題を作成します。何問作成しますか？」

ユーザー: 「3問お願いします」

AI: 「どのような形式の問題を希望されますか？（記述式/選択式）」

ユーザー: 「記述式でお願いします」

AI: 「特に含めたい内容や条件はありますか？例えば、分数を含む問題や文章題など」

ユーザー: 「分数係数を含む方程式を出題してください」

AI: 「了解しました。中学生向けの分数係数を含む一次方程式の記述式問題を3問生成します...」

[問題生成中...]

AI: 「問題が生成されました。右側のパネルでPDFをプレビューできます。」
```

## 4. 問題生成ワークフロー

### 4.1 問題仕様の決定（スロットフィリング）

問題仕様の決定プロセスでは、AIが必要な情報を対話的に収集します：

1. **必須項目**:
   - 難易度: 小学生/中学生/高校生
   - 数学分野: 数と式/関数/図形/確率・統計など
   - 問題数: 1〜10問
   - 出題形式: 記述式/選択式/計算問題など

2. **オプション項目**:
   - 詳細条件: 特定のトピックや条件（例：「因数分解を含む問題」）
   - 制約条件: 生成に関する特別な制約

### 4.2 問題生成と検証

問題生成から検証までのプロセス：

1. **問題生成**: AIが仕様に基づいて問題と解答を生成
2. **検証**: 生成された問題の多角的検証
   - 難易度の適合性
   - 数学的正確性
   - 解答の完全性
   - 日本語表現の自然さ
3. **修正**: 問題点がある場合は自動修正
4. **TeX変換**: 問題と解答をTeX形式に変換
5. **PDF生成**: TeXからPDFを生成

このプロセスを通じて、高品質で教育的価値の高い数学問題が生成されます。

## 5. 詳細機能ガイド

### 5.1 対応する数学分野

システムは以下の数学分野に対応しています：

- **数と式**: 整数、分数、小数、代数式、方程式、不等式など
- **関数**: 一次関数、二次関数、指数関数、対数関数、三角関数など
- **図形**: 平面図形、立体図形、座標幾何、相似と合同、三角比など
- **確率・統計**: 確率、データ分析、統計的推測、組み合わせなど

### 5.2 難易度レベル

難易度は以下の3段階から選択できます：

- **小学生**: 基本的な計算、図形の基礎、簡単な文章題など
- **中学生**: 方程式、一次関数、図形の性質、確率の基礎など
- **高校生**: 二次関数、三角関数、微分積分の入門、確率分布など

各難易度に応じて、適切な問題が生成されます。

### 5.3 図形・グラフ機能

システムは問題内容に応じて自動的に図形やグラフを生成します：

- **関数グラフ**: 一次関数、二次関数、三角関数などのグラフ
- **幾何図形**: 三角形、四角形、円などの図形
- **統計グラフ**: ヒストグラム、散布図などの統計的グラフ

図形は問題の内容に合わせて適切に配置され、視覚的な理解を助けます。

### 5.4 出題形式

以下の出題形式に対応しています：

- **記述式**: 解答を記述するタイプの問題
- **選択式**: 選択肢から正解を選ぶタイプの問題
- **計算問題**: 計算結果を求めるタイプの問題
- **証明問題**: 数学的な命題を証明するタイプの問題

### 5.5 PDFカスタマイズ

生成されるPDFは以下の要素で構成されています：

- **問題文**: 生成された数学問題
- **解答**: 問題の答え
- **解説**: 答えに至る過程の詳細な説明
- **図形/グラフ**: 問題理解を助ける視覚的要素

## 6. よくある質問と回答

### Q1: どのような種類の数学問題を生成できますか？
A1: 小学生から高校生レベルまでの幅広い数学問題を生成できます。数と式、関数、図形、確率・統計など、主要な数学分野をカバーしています。

### Q2: 生成された問題の難易度はどのように決まりますか？
A2: 難易度は対話中に指定した「小学生」「中学生」「高校生」のレベルに基づいて調整されます。AIが各難易度に適した問題を生成します。

### Q3: 生成された問題に誤りがある場合はどうすればよいですか？
A3: システム内部で数学的な検証プロセスを実行していますが、誤りを見つけた場合は、新たに問題を生成するか、より詳細な条件を指定して再生成してください。

### Q4: PDFファイルはどこに保存されますか？
A4: 「保存」ボタンをクリックすると、ブラウザのダウンロード設定に従ってファイルが保存されます。通常はダウンロードフォルダに保存されます。

### Q5: インターネット接続なしで使用できますか？
A5: 一部の機能はローカルで動作しますが、問題生成にはOpenAI APIへの接続が必要なため、インターネット接続が必須です。

### Q6: 一度に複数の問題を生成できますか？
A6: はい、一度に最大10問まで生成できます。対話中に問題数を指定してください。

## 7. トラブルシューティング

### 7.1 問題生成が失敗する場合

1. インターネット接続を確認してください
2. `.env`ファイルにOpenAI APIキーが正しく設定されているか確認してください
3. システムを再起動してみてください
4. 詳細条件が複雑すぎる場合は、シンプルな条件で試してみてください

### 7.2 PDFプレビューが表示されない場合

1. ブラウザの更新ボタンをクリックしてみてください
2. TeX Live（xelatex）が正しくインストールされているか確認してください
3. アプリケーションを再起動してみてください
4. 問題を再生成してみてください

### 7.3 起動時の問題

アプリケーションが起動しない場合：

1. 必要なソフトウェア（Node.js、TeX Liveなど）がインストールされているか確認
2. コマンドラインから手動で起動（`npm run start:windows`または`npm run start:unix`）
3. ログファイルをチェック（`output/logs`ディレクトリ）

## 8. ヒントと活用方法

### 8.1 効果的な問題生成のコツ

1. **具体的な条件を指定する**: 「二次関数の最大値・最小値に関する問題」など、具体的な条件を指定するとより適切な問題が生成されます

2. **段階的な難易度設定**: 同じトピックでも難易度を変えて複数の問題セットを生成すると、学習の段階的な進行に役立ちます

3. **複合的な条件の活用**: 「因数分解を用いて二次方程式を解く問題」など、複数の概念を組み合わせた問題も指定できます

### 8.2 教育現場での活用例

1. **演習問題の作成**: 授業で扱った内容に合わせた演習問題を短時間で作成
2. **テスト問題の準備**: 小テストや定期テストの問題作成を効率化
3. **個別学習の支援**: 生徒の理解度に合わせた個別の問題を提供
4. **復習教材の作成**: 既習内容の復習用に様々なバリエーションの問題を作成

### 8.3 学習者向けヒント

1. **自己診断**: 特定の分野の問題を生成して自分の理解度をチェック
2. **弱点強化**: 苦手な分野を集中的に練習
3. **解法の理解**: 様々な問題パターンを生成し、解法の幅を広げる

---

このシステムを活用して、効率的な教材作成や効果的な学習をサポートしていただければ幸いです。ご不明点やご要望がございましたら、プロジェクト管理者までお問い合わせください。

*本マニュアルは数学問題生成AIシステム バージョン1.0.0に対応しています。* 

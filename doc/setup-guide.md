# 数学問題生成AIシステム セットアップガイド

このガイドでは、Windows PC上で「数学問題生成AIシステム」を設定・実行するための詳細な手順を説明します。

## 目次

1. [システム要件](#1-システム要件)
2. [前提条件](#2-前提条件)
3. [環境構築手順](#3-環境構築手順)
4. [OpenAI API キーの設定](#4-openai-api-キーの設定)
5. [プロジェクトの起動](#5-プロジェクトの起動)
6. [動作確認](#6-動作確認)
7. [トラブルシューティング](#7-トラブルシューティング)

## 1. システム要件

### ハードウェア要件
- **OS**: Windows 10/11
- **プロセッサ**: Intel Core i5 以上または同等のAMDプロセッサ
- **メモリ**: 8GB以上 (16GB推奨)
- **ストレージ**: 1GB以上の空き容量

### ソフトウェア要件
- **Node.js**: v20.10.0以上
- **Python**: 3.11.0以上
- **npm**: 10.2.0以上
- **pip**: 23.3以上
- **TeX Live**: 2023以上

## 2. 前提条件

セットアップを始める前に、以下のツールがインストールされていることを確認してください。

### 2.1 Node.jsとnpm

1. [Node.jsの公式サイト](https://nodejs.org/)から最新のLTS版をダウンロードしてインストールしてください。
2. インストールが完了したら、コマンドプロンプトまたはPowerShellで以下のコマンドを実行して、バージョンを確認します：

```bash
node -v
npm -v
```

### 2.2 Python

1. [Pythonの公式サイト](https://www.python.org/downloads/)から最新版のPython 3.11以上をダウンロードしてインストールしてください。
2. インストール時に「Add Python to PATH」オプションを必ずチェックしてください。
3. インストールが完了したら、コマンドプロンプトまたはPowerShellで以下のコマンドを実行して、バージョンを確認します：

```bash
python --version
pip --version
```

### 2.3 TeX Live

PDFの生成に使用するTeXシステムをインストールします。

1. [TeX Liveの公式サイト](https://tug.org/texlive/acquire-netinstall.html)からインストーラをダウンロードします。
2. インストーラを実行し、「Install for all users」を選択して標準的なインストールを行います。
3. インストールが完了したら、コマンドプロンプトまたはPowerShellで以下のコマンドを実行して、確認します：

```bash
xelatex --version
```

## 3. 環境構築手順

### 3.1 リポジトリのクローンまたはダウンロード

1. GitHubからリポジトリをクローンするか、ZIPファイルとしてダウンロードし、任意のディレクトリに展開します：

```bash
git clone <リポジトリのURL>
cd 数学問題生成AIシステム
```

または、ZIPファイルをダウンロードした場合：

```bash
cd 数学問題生成AIシステム
```

### 3.2 依存関係のインストール

プロジェクトのルートディレクトリで以下のコマンドを実行して、必要なパッケージをインストールします：

#### Node.js依存関係のインストール

```bash
# ルートディレクトリの依存関係をインストール
npm install

# フロントエンド依存関係のインストール
cd client
npm install
cd ..

# バックエンド依存関係のインストール
cd server
npm install
cd ..
```

#### Python依存関係のインストール

```bash
cd server
pip install -r requirements.txt
cd ..
```

### 3.3 出力ディレクトリの作成

TeXファイルとPDFファイルを格納するためのディレクトリを作成します：

```bash
mkdir -p output/tex
mkdir -p output/pdfs
```

## 4. OpenAI API キーの設定

このシステムはOpenAI APIを使用して問題生成や検証を行います。そのため、OpenAI APIキーが必要です。

### 4.1 APIキーの取得

1. [OpenAIのウェブサイト](https://platform.openai.com/)にアクセスしてアカウントを作成またはログインします。
2. APIセクションで新しいAPIキーを生成します。

### 4.2 環境変数の設定

プロジェクトのルートディレクトリに`.env`ファイルを作成し、以下の内容を追加します：

```
OPENAI_API_KEY=your_api_key_here
```

`your_api_key_here`を実際のAPIキーに置き換えてください。

## 5. プロジェクトの起動

システムはフロントエンドとバックエンドの2つのコンポーネントから構成されています。それぞれを起動する必要があります。

### 5.1 バックエンドサーバーの起動

新しいコマンドプロンプトまたはPowerShellウィンドウを開き、プロジェクトのルートディレクトリに移動してから、以下のコマンドを実行します：

```bash
cd server
npm run dev
```

成功すると、以下のようなメッセージが表示されます：

```
サーバーが起動しました。http://localhost:3000/ でアクセスできます。
```

### 5.2 フロントエンドの起動

別の新しいコマンドプロンプトまたはPowerShellウィンドウを開き、プロジェクトのルートディレクトリに移動してから、以下のコマンドを実行します：

```bash
cd client
npm run dev
```

成功すると、以下のようなメッセージが表示されます：

```
VITE v6.3.3 ready in 689 ms
➜  Local:   http://localhost:5173/
➜  Network: use --host to expose
➜  press h + enter to show help
```

## 6. 動作確認

### 6.1 ブラウザでアクセス

Webブラウザを開き、以下のURLにアクセスします：

```
http://localhost:5173/
```

数学問題生成AIシステムのユーザーインターフェースが表示されます。

### 6.2 基本的な使用方法

1. 左側のチャットインターフェースで、必要な数学問題の種類を入力します（例：「高校生向けの二次関数の問題を作成してください」）。
2. システムが対話的に必要な情報を質問します（難易度、問題数など）。
3. すべての情報が揃うと、問題が生成され、右側のパネルにPDFプレビューが表示されます。
4. PDFをダウンロードするには、プレビュー下部の「保存」ボタンをクリックします。

## 7. トラブルシューティング

### 7.1 TeXコンパイルエラー

PDFの生成に失敗する場合、以下を確認してください：

1. TeX Liveが正しくインストールされていることを確認します。
2. 必要なTeXパッケージがインストールされていることを確認します：

```bash
tlmgr install amsmath amssymb geometry pgfplots tikz
```

### 7.2 OpenAI API接続エラー

OpenAI APIとの接続に問題がある場合、以下を確認してください：

1. APIキーが正しいこと。
2. インターネット接続が有効であること。
3. OpenAI APIの利用制限（レート制限）に達していないこと。

### 7.3 ポートが使用中の場合

ポートがすでに使用されている場合、以下の手順を試してください：

1. 別のポートを使用するようにサーバー設定を変更します：
   - `server/src/index.ts`ファイルを開き、ポート番号を変更します。
   - 同様に、`client/vite.config.ts`のポート設定も変更します。

2. プロセスをすべて終了して再起動します。

### 7.4 一般的なエラーの解決

問題が発生した場合、以下の手順を試してください：

1. サーバーとクライアントのログを確認して、エラーメッセージを特定します。
2. 両方のサーバーを再起動します。
3. 依存関係を再度インストールします：

```bash
npm ci
cd client && npm ci && cd ..
cd server && npm ci && cd ..
```

## サポート

追加のサポートやヘルプが必要な場合は、GitHubのIssueを作成するか、プロジェクト管理者にお問い合わせください。

---

*このセットアップガイドは数学問題生成AIシステムのバージョン1.0.0に対応しています。* 